library(xtable)
source("../../utils/compute_coverage.R")
data_name = 'MCAR_30'
n_imputations = 10
n_way = 1
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 30% values MCAR (Marginal probabilities)', digits = 2)
# boxplot for estimates for marginal distribution
boxplot(df, col = 'light blue', xlab = 'Imputation method',
ylab = 'Coverage (fraction)', ylim = c(0,1),
main = paste('Coverage from different imputation methods: Marginal pmf'))
n_way = 2
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 30% values MCAR (Bivariate probabilities)', digits = 2)
n_way = 3
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 30% values MCAR (Trivariate probabilities)', digits = 2)
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(readr)
library(xtable)
source("../../utils/compute_coverage.R")
data_name = 'MCAR_45'
n_imputations = 10
n_way = 1
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 45% values MCAR (Marginal probabilities)', digits = 2)
# boxplot for estimates for marginal distribution
boxplot(df, col = 'light blue', xlab = 'Imputation method',
ylab = 'Coverage (fraction)', ylim = c(0,1),
main = paste('Coverage from different imputation methods: Marginal pmf'))
n_way = 2
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 45% values MCAR (Bivariate probabilities)', digits = 2)
n_way = 3
coverage = coverage_models(data_name, n_way, n_imputations)
df = format_list(coverage)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of coverage for different imputation methods, and the premissing data with 45% values MCAR (Trivariate probabilities)', digits = 2)
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(readr)
library(xtable)
source("../../utils/compute_rel_MSE.R")
data_name = 'MAR_30'
n_imputations = 10
n_way = 1
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of Relative MSE for different imputation methods, and the premissing data with 30% values MAR (Marginal probabilities)', digits = 2)
boxplot(df, col = 'light blue', xlab = 'Imputation method',
ylab = 'Relative MSE (fraction)', ylim = c(0,500),
main = paste('Relative MSE from different imputation methods: Marginal pmf'))
n_way = 2
rel_MSE = rel_MSE_models(data_name, n_way)
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(readr)
library(xtable)
source("../../utils/compute_rel_MSE.R")
data_name = 'MAR_30'
n_imputations = 10
n_way = 1
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1))
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of Relative MSE for different imputation methods, and the premissing data with 30% values MAR (Marginal probabilities)', digits = 2)
boxplot(df, col = 'light blue', xlab = 'Imputation method',
ylab = 'Relative MSE (fraction)', ylim = c(0,500),
main = paste('Relative MSE from different imputation methods: Marginal pmf'))
n_way = 2
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1))
View(rel_MSE)
rel_MSE[['CART']]
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(readr)
library(xtable)
source("../../utils/compute_rel_MSE.R")
data_name = 'MAR_30'
n_imputations = 10
n_way = 1
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of Relative MSE for different imputation methods, and the premissing data with 30% values MAR (Marginal probabilities)', digits = 2)
boxplot(df, col = 'light blue', xlab = 'Imputation method',
ylab = 'Relative MSE (fraction)', ylim = c(0,500),
main = paste('Relative MSE from different imputation methods: Marginal pmf'))
n_way = 2
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of Relative MSE for different imputation methods, and the premissing data with 30% values MAR (Bivariate probabilities)', digits = 2)
n_way = 3
rel_MSE = rel_MSE_models(data_name, n_way)
df = format_list(rel_MSE)
summary = apply(df, MARGIN = 2, quantile , probs = c(0, 0.25, 0.5, 0.75, 1), na.rm = TRUE)
rownames(summary) <- c('Min.', '1st Qu.', 'Median', '3rd Qu.', 'Max.')
xtable(summary, caption = 'Distribution of Relative MSE for different imputation methods, and the premissing data with 30% values MAR (Trivariate probabilities)', digits = 2)
1/0
View(summary)
View(df)
# DO NOT ALTER CODE IN THIS CHUNK
# The very first time you use this R markdown file, you should install each of the packages below.
# The same goes for other packages you might decide to use
# Remember that you only need to install each R package once in R (ever -- unless you change computers).
# All you need to do whenever you need to use the package again (after restarting the R session),
# is to use the library function to call the package.
# For example, type install.packages("knitr") in the console to install the knitr package.
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(arm)
library(pROC)
library(tidyverse)
library(MASS)
library(tigerstats)
library(leaps)
library(car)
library(rms)
require(caret)
require(e1071)
library(lme4)
library(lattice)
library(broom)
library(boot)
library(ggplot2)
library(cobalt)
require(tidyverse)
require(rstanarm)
require(magrittr)
require(rstan)
require(MCMCpack)
library(abind)
library(matrixStats)
library(truncnorm)
library(mvtnorm)
library(MCMCpack)
library(mnormt)
library(coda)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
# sample MCAR dataset from PUMS
source("../utils/sampleMCAR.R")
n = 10000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
# DO NOT ALTER CODE IN THIS CHUNK
# The very first time you use this R markdown file, you should install each of the packages below.
# The same goes for other packages you might decide to use
# Remember that you only need to install each R package once in R (ever -- unless you change computers).
# All you need to do whenever you need to use the package again (after restarting the R session),
# is to use the library function to call the package.
# For example, type install.packages("knitr") in the console to install the knitr package.
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(arm)
library(pROC)
library(tidyverse)
library(MASS)
library(tigerstats)
library(leaps)
library(car)
library(rms)
require(caret)
require(e1071)
library(lme4)
library(lattice)
library(broom)
library(boot)
library(ggplot2)
library(cobalt)
require(tidyverse)
require(rstanarm)
require(magrittr)
require(rstan)
require(MCMCpack)
library(abind)
library(matrixStats)
library(truncnorm)
library(mvtnorm)
library(MCMCpack)
library(mnormt)
library(coda)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 10000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
df
ordinal_mod <- polr(NP~., data = df)
class(df[,1])
ordinal_mod <- polr(NP~., data = df)
colnames(df)
ordinal_mod <- polr(NP~MV+VEH, data = df)
summary(ordinal_mod)
class(df)
?polr
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 1000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
View(df)
ordinal_mod <- polr(NP~., data = df)
?polr
ordinal_mod <- MASS::polr(NP~., data = df)
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE)
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE, method = 'logistic')
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE, method = 'probit')
df
View(df)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 100
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE)
levels = c(7,7,7,19,5,4,7,2,17,3,13)
# format to be nominal variables
for (col_index in 1:ncol(df_temp)) {
df[,col_index] = factor(df[,col_index], levels = 1:levels[col_index], ordered = FALSE)
}
levels = c(7,7,7,19,5,4,7,2,17,3,13)
# format to be nominal variables
for (col_index in 1:ncol(df)) {
df[,col_index] = factor(df[,col_index], levels = 1:levels[col_index], ordered = FALSE)
}
mult_mod <- multinom(NP~., data=df)
# DO NOT ALTER CODE IN THIS CHUNK
# The very first time you use this R markdown file, you should install each of the packages below.
# The same goes for other packages you might decide to use
# Remember that you only need to install each R package once in R (ever -- unless you change computers).
# All you need to do whenever you need to use the package again (after restarting the R session),
# is to use the library function to call the package.
# For example, type install.packages("knitr") in the console to install the knitr package.
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(arm)
library(pROC)
library(tidyverse)
library(MASS)
library(tigerstats)
library(leaps)
library(car)
library(rms)
require(caret)
require(e1071)
library(lme4)
library(lattice)
library(broom)
library(boot)
library(ggplot2)
library(cobalt)
require(tidyverse)
require(rstanarm)
require(magrittr)
require(rstan)
require(MCMCpack)
library(abind)
library(matrixStats)
library(truncnorm)
library(mvtnorm)
library(MCMCpack)
library(mnormt)
library(coda)
library(arm)
library(pROC)
library(e1071)
library(caret)
library(nnet)
library(knitr)
library(MASS)
mult_mod <- multinom(NP~., data=df)
mult_mod <- multinom(NP~., data=df)
summary(mult_mod)
min(df[,'NP'])
df[,'NP']
df[,'NP']==7
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 100
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
mult_mod <- multinom(NP~., data=df)
summary(mult_mod)
df
View(df)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 100
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE)
ordinal_mod <- MASS::polr(VEH~., data = df, Hess = TRUE)
?mice
??mice
# DO NOT ALTER CODE IN THIS CHUNK
# The very first time you use this R markdown file, you should install each of the packages below.
# The same goes for other packages you might decide to use
# Remember that you only need to install each R package once in R (ever -- unless you change computers).
# All you need to do whenever you need to use the package again (after restarting the R session),
# is to use the library function to call the package.
# For example, type install.packages("knitr") in the console to install the knitr package.
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(arm)
library(pROC)
library(tidyverse)
library(MASS)
library(tigerstats)
library(leaps)
library(car)
library(rms)
require(caret)
require(e1071)
library(lme4)
library(lattice)
library(broom)
library(boot)
library(ggplot2)
library(cobalt)
require(tidyverse)
require(rstanarm)
require(magrittr)
require(rstan)
require(MCMCpack)
library(abind)
library(matrixStats)
library(truncnorm)
library(mvtnorm)
library(MCMCpack)
library(mnormt)
library(coda)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 10000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
library(mice)
imputed_df <-  mice(df_observed,m=5,polr.to.loggedEvents = TRUE)
?mice
library(mice)
imputed_df <-  mice(df_observed,m=5,polr.to.loggedEvents = TRUE, print = FALSE)
imputed_df$loggedEvents
imputed_df$method
# DO NOT ALTER CODE IN THIS CHUNK
# The very first time you use this R markdown file, you should install each of the packages below.
# The same goes for other packages you might decide to use
# Remember that you only need to install each R package once in R (ever -- unless you change computers).
# All you need to do whenever you need to use the package again (after restarting the R session),
# is to use the library function to call the package.
# For example, type install.packages("knitr") in the console to install the knitr package.
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'h', fig.align = 'center')
knitr::opts_chunk$set(fig.cap = "",  fig.path = "Plot")
library(knitr)
library(dplyr)
library(arm)
library(pROC)
library(tidyverse)
library(MASS)
library(tigerstats)
library(leaps)
library(car)
library(rms)
require(caret)
require(e1071)
library(lme4)
library(lattice)
library(broom)
library(boot)
library(ggplot2)
library(cobalt)
require(tidyverse)
require(rstanarm)
require(magrittr)
require(rstan)
require(MCMCpack)
library(abind)
library(matrixStats)
library(truncnorm)
library(mvtnorm)
library(MCMCpack)
library(mnormt)
library(coda)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 10000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
library(mice)
n_imputations = 5
# levels of each of the columns
levels = c(7,7,7,19,5,4,7,2,17,3,13)
# format to be nominal variables
df_temp = df_observed
for (col_index in 1:ncol(df_temp)) {
df_temp[,col_index] = factor(df_temp[,col_index], levels = 1:levels[col_index], ordered = FALSE)
}
imputed_df <-  mice(df_temp,m=n_imputations,print=F)
imputation_list = list()
for (i in 1:n_imputations) {
d = complete(imputed_df, i)
# format columns of d to be ordinal variables
for (col_index in 1:ncol(df_observed)) {
d[,col_index] = factor(d[,col_index], levels = 1:levels[col_index], ordered = TRUE)
}
imputation_list[[i]] = d
}
imputed_df$method
imputed_df$loggedEvents
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 1000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
ordinal_mod <- MASS::polr(VEH~., data = df, Hess = TRUE)
summary(ordinal_mod)
MASS::polr(VEH~., data = df, Hess = TRUE)
colnames(df)
ordinal_mod <- MASS::polr(NP~., data = df, Hess = TRUE)
ordinal_mod <- MASS::polr(ENG~., data = df, Hess = TRUE)
ordinal_mod <- MASS::polr(SCHL~., data = df, Hess = TRUE)
# sample MCAR dataset from PUMS
source("../../utils/sampleMCAR.R")
n = 10000
missing_col = c(1,3,7,9,10,11)
missing_prob = 0.3
set.seed(0)
output_list <- sampleMCAR(n, missing_prob)
df <- output_list[['df']]
df_observed <- output_list[['df_observed']]
ordinal_mod <- MASS::polr(SCHL~., data = df, Hess = TRUE)
colnames(df)
ordinal_mod <- MASS::polr(MARHT~ENG, data = df, Hess = TRUE)
summary(ordinal_mod)
ordinal_mod <- MASS::polr(MARHT~ENG+VH, data = df, Hess = TRUE)
ordinal_mod <- MASS::polr(MARHT~ENG+NP, data = df, Hess = TRUE)
summary(ordinal_mod)
